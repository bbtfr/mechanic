<%= content_for :title do %>
  点评技师
<% end %>

<%= simple_form_for(@order) do |f| %>
  <%= f.error_messages %>

  <div class="content-padded">
    <%= f.input :professionality do %>
      <span class="icon icon-star-filled"></span>
      <span class="icon icon-star-filled"></span>
      <span class="icon icon-star-filled"></span>
      <span class="icon icon-star-filled"></span>
      <span class="icon icon-star-filled"></span>
      <%= f.hidden_field :professionality, value: 5 %>
    <% end %>
    <%= f.input :timeliness do %>
      <span class="icon icon-star-filled"></span>
      <span class="icon icon-star-filled"></span>
      <span class="icon icon-star-filled"></span>
      <span class="icon icon-star-filled"></span>
      <span class="icon icon-star-filled"></span>
      <%= f.hidden_field :timeliness, value: 5 %>
    <% end %>
    <%= f.input :review, input_html: { rows: 4 } %>

    <%= f.button :submit, "确定", class: "btn-block btn-positive" %>
  </div>
<% end %>

<script>
  var elements = document.querySelectorAll(".input .icon");
  for (var i = 0; i < elements.length; i++) {
    elements[i].addEventListener("click", function(event) {
      var icons = this.parentElement.querySelectorAll(".icon");
      var hidden = this.parentElement.querySelector("input[type=hidden]");
      var filled = true;

      for (var j = 0; j < icons.length; j++) {
        var icon = icons[j];
        if (filled) {
          icon.classList.remove("icon-star");
          icon.classList.add("icon-star-filled");
          if (icon === this) {
            hidden.value = j + 1;
            filled = false;
          }
        } else {
          icon.classList.remove("icon-star-filled");
          icon.classList.add("icon-star");
        }
      }

    });
  }
</script>
